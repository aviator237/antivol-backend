
{% extends "auth/base.html" %}
{% load static %}

    {% block meta %}
    <meta property="og:title" content="{{ title }}" />
    <meta name="description" content="Page de réinitialisation du mot depasse | Site Vie de réussite" />
    <meta property="og:image" content="{% static 'images/logo_site_vie_reussie.jpeg' %}" />
    <meta property="og:image:secure_url" content="{% static 'images/logo_site_vie_reussie.jpeg' %}" />
    <meta property="og:image:alt" content="Le logo du site" />
    {% endblock meta %}

{% block content %}
<link rel="stylesheet" href="{% static 'auth/reset_password.css' %}">

<div class="form-div">
    {% if next %}
    <form class="form" action="{% url 'auth:reset' %}?next={{ next }}" method="post">
    {% else %}
    <form class="form" action="{% url 'auth:reset' %}" method="post">
    {% endif %}

        {% csrf_token %}
        <div class="header">Mot de passe oublié</div>

        {% if messages %}
        <div class="messages">
            {% for message in messages %}
            <div class="message {% if message.tags %}{{ message.tags }}{% endif %}">
                {{ message }}
            </div>
            {% endfor %}
        </div>
        {% endif %}

        <div class="inputs">
            <div class="tabs">
                <button type="button" class="tab-btn active" id="phone-tab">Téléphone</button>
                <button type="button" class="tab-btn" id="email-tab">Email</button>
            </div>

            <div class="tab-content" id="phone-content">
                <p class="info-text">Pour les utilisateurs classiques, veuillez entrer votre numéro de téléphone.</p>
                <input placeholder="Entrez votre numéro de téléphone" class="input" type="tel" name="identifier" id="phone-input">
            </div>

            <div class="tab-content" id="email-content" style="display: none;">
                <p class="info-text">Pour les utilisateurs d'entreprise, veuillez entrer votre adresse email.</p>
                <input placeholder="Entrez votre email" class="input" type="email" name="identifier" id="email-input">
            </div>

            <button class="sigin-btn" type="submit">Réinitialiser le mot de passe</button>

            <div class="forget-return-div">
                {% if next %}
                <a class="return" href="{% url 'auth:login' %}?next={{ next }}">Page de connexion</a>
                {% else %}
                <a class="return" href="{% url 'auth:login' %}">Page de connexion</a>
                {% endif %}
            </div>
        </div>
    </form>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const phoneTab = document.getElementById('phone-tab');
        const emailTab = document.getElementById('email-tab');
        const phoneContent = document.getElementById('phone-content');
        const emailContent = document.getElementById('email-content');
        const phoneInput = document.getElementById('phone-input');
        const emailInput = document.getElementById('email-input');

        phoneTab.addEventListener('click', function() {
            phoneTab.classList.add('active');
            emailTab.classList.remove('active');
            phoneContent.style.display = 'block';
            emailContent.style.display = 'none';
            phoneInput.setAttribute('name', 'identifier');
            emailInput.removeAttribute('name');
        });

        emailTab.addEventListener('click', function() {
            emailTab.classList.add('active');
            phoneTab.classList.remove('active');
            emailContent.style.display = 'block';
            phoneContent.style.display = 'none';
            emailInput.setAttribute('name', 'identifier');
            phoneInput.removeAttribute('name');
        });
    });
</script>

{% endblock %}