{% extends "account/base.html" %}
{% load static %}
{% block content %}

<link rel="stylesheet" href="{% static 'account/css/add_photo.css' %}">

{% if back_url %}
<a href="{{ back_url }}" class="back-button">
  
{% else %}
<a href="{% url 'album:albums' %}" class="back-button">
  
{% endif %}

    <svg height="16" width="16" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 1024 1024">
        <path
            d="M874.690416 495.52477c0 11.2973-9.168824 20.466124-20.466124 20.466124l-604.773963 0 188.083679 188.083679c7.992021 7.992021 7.992021 20.947078 0 28.939099-4.001127 3.990894-9.240455 5.996574-14.46955 5.996574-5.239328 0-10.478655-1.995447-14.479783-5.996574l-223.00912-223.00912c-3.837398-3.837398-5.996574-9.046027-5.996574-14.46955 0-5.433756 2.159176-10.632151 5.996574-14.46955l223.019353-223.029586c7.992021-7.992021 20.957311-7.992021 28.949332 0 7.992021 8.002254 7.992021 20.957311 0 28.949332l-188.073446 188.073446 604.753497 0C865.521592 475.058646 874.690416 484.217237 874.690416 495.52477z">
        </path>
    </svg>
    <span>Retour</span>
</a>
<hr class="head-hr">

<h2 class="album_name">
    <svg style="height: 35px; width: 35px" class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
        <path fill-rule="evenodd" d="M6 2a2 2 0 0 0-2 2v15a3 3 0 0 0 3 3h12a1 1 0 1 0 0-2h-2v-2h2a1 1 0 0 0 1-1V4a2 2 0 0 0-2-2h-8v16h5v2H7a1 1 0 1 1 0-2h1V2H6Z" clip-rule="evenodd"/>
      </svg>
      
{{ album.name }}</h2>
{% if album.owner.first_name or album.owner.last_name %}
        <h3>Propriétaire: {{ album.owner.last_name }} {{ album.owner.first_name }}</h3>
        {% else %}
        <h3>Propriétaire: {{ album.owner.username }}</h>
        {% endif %}

<form id="uploadForm" action="{% url 'album:add_photos' album.id %}" method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <input class="upload_images_button" type="file" id="fileInput" name="photos" accept="image/*" multiple>
    <div id="dropZone" class="drop-zone">
        <svg height="1em" viewBox="0 0 640 512">
            <path
                d="M144 480C64.5 480 0 415.5 0 336c0-62.8 40.2-116.2 96.2-135.9c-.1-2.7-.2-5.4-.2-8.1c0-88.4 71.6-160 160-160c59.3 0 111 32.2 138.7 80.2C409.9 102 428.3 96 448 96c53 0 96 43 96 96c0 12.2-2.3 23.8-6.4 34.6C596 238.4 640 290.1 640 352c0 70.7-57.3 128-128 128H144zm79-217c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l39-39V392c0 13.3 10.7 24 24 24s24-10.7 24-24V257.9l39 39c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-80-80c-9.4-9.4-24.6-9.4-33.9 0l-80 80z">
            </path>
        </svg>
        Glissez et déposez vos photos ici
    </div>
    <div id="previewGrid" class="grid-container"></div>
    <div class="btn_list">
        <button class="upload_images_button" type="button" id="addMoreBtn"><svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 7.757v8.486M7.757 12h8.486M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"/>
          </svg>
          Ajouter des Images</button>
        <button class="upload_images_button" type="button" id="deleteBtn">Supprimer</button>
    </div>
    <div class="image-count-div">
        <div id="selectedCount">0 images sélectionnées</div>
        <div id="totalCount">0 images au total</div>
    </div>

    <div class="progress" style="display: none;">
        <div class="bar"></div>
        <div class="progress-text">
            <span id="progress-percentage">0%</span> - <span id="progress-count">0/0</span>
        </div>
    </div>

<hr class="head-hr">
    <button type="submit" class="upload_images_button" id="submitBtn">Envoyer</button>
</form>

<script src="{% static 'account/js/add_photo.js' %}"></script>

{% endblock content %}
