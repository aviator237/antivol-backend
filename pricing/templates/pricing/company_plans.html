{% extends "account/base.html" %}
{% load static %}
{% block content %}

<link rel="stylesheet" href="{% static 'pricing/css/subscribe.css' %}">

<a href="{% url 'pricing:company_pricing' %}" class="back-button">
    <svg height="16" width="16" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 1024 1024">
        <path
            d="M874.690416 495.52477c0 11.2973-9.168824 20.466124-20.466124 20.466124l-604.773963 0 188.083679 188.083679c7.992021 7.992021 7.992021 20.947078 0 28.939099-4.001127 3.990894-9.240455 5.996574-14.46955 5.996574-5.239328 0-10.478655-1.995447-14.479783-5.996574l-223.00912-223.00912c-3.837398-3.837398-5.996574-9.046027-5.996574-14.46955 0-5.433756 2.159176-10.632151 5.996574-14.46955l223.019353-223.029586c7.992021-7.992021 20.957311-7.992021 28.949332 0 7.992021 8.002254 7.992021 20.957311 0 28.949332l-188.073446 188.073446 604.753497 0C865.521592 475.058646 874.690416 484.22707 874.690416 495.52477z">
        </path>
    </svg>
    <span>Retour</span>
</a>
<hr class="head-hr">
<h1>Choisissez votre abonnement</h1>

<section class="list_plan_section">
    {% for plan in plans %}
    <div class="plan_card {% if current_plan and current_plan.id == plan.id %}current-plan{% endif %}">
        <div class="plan_card_head">
            <h1>{{ plan.amount }}<span>€/{% if plan.interval_count != 1 %}
                {{ plan.interval_count }}
                {% endif %}{{ plan.get_interval_display }}</span></h1>
            <hr>
            {% if plan.interval == 'year' %}
            <div class="promo-badge"><span>1 mois gratuit</span></div>
            {% endif %}
            <p>{{ plan.product.description }}</p>
            <ul class="plan-features">
                <li>Publication illimitée de catalogues</li>
                <li>Visibilité sur la plateforme</li>
                <li>Statistiques de consultation</li>
                {% if plan.interval == 'month' and plan.interval_count == 3 %}
                <li>Économisez 9% par rapport au mensuel</li>
                {% elif plan.interval == 'year' %}
                <li>Économisez 17% par rapport au mensuel</li>
                {% endif %}
            </ul>
        </div>
        {% if current_plan and current_plan.id == plan.id %}
        <div class="current-plan-badge">Abonnement actuel</div>
        {% else %}
        <a href="{% url 'pricing:company_subscribe' plan.id %}">
            Choisir
            <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 12H5m14 0-4 4m4-4-4-4"/>
            </svg>
        </a>
        {% endif %}
    </div>
    {% endfor %}
</section>

<div class="plan-info">
    <h2>Informations sur les abonnements</h2>
    <ul>
        <li>Tous les abonnements sont renouvelés automatiquement à la fin de la période.</li>
        <li>Vous pouvez annuler votre abonnement à tout moment depuis votre espace client.</li>
        <li>Le paiement est sécurisé et géré par Stripe.</li>
        <li>Une facture vous sera envoyée par email après chaque paiement.</li>
    </ul>
</div>

{% endblock content %}
