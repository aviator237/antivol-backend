{% extends "account/base.html" %}

{% block title %} <title>{{ title }}</title>{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="row">
        <div class="col-12">
            <h1>Data Import Dashboard</h1>
            <p class="text-danger">Warning: These operations will import data into the database. Only superadmins should use these features.</p>

            <div class="alert alert-info">
                <p>Import operations run in the background. You will receive an immediate response, but the actual import may take some time to complete.</p>
                <p>Check the server logs for progress and any errors.</p>
            </div>

            <div class="card mb-4">
                <div class="card-header">
                    <h3>Available Data Files</h3>
                </div>
                <div class="card-body">
                    <ul class="list-group">
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            mairies.json
                            {% if files.mairies_exists %}
                                <span class="badge bg-success">Available</span>
                            {% else %}
                                <span class="badge bg-danger">Not Found</span>
                            {% endif %}
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            liste-des-pharmacies-1.json
                            {% if files.pharmacies1_exists %}
                                <span class="badge bg-success">Available</span>
                            {% else %}
                                <span class="badge bg-danger">Not Found</span>
                            {% endif %}
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            liste-des-pharmacies-2.json
                            {% if files.pharmacies2_exists %}
                                <span class="badge bg-success">Available</span>
                            {% else %}
                                <span class="badge bg-danger">Not Found</span>
                            {% endif %}
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            liste-des-pharmacies-3.json
                            {% if files.pharmacies3_exists %}
                                <span class="badge bg-success">Available</span>
                            {% else %}
                                <span class="badge bg-danger">Not Found</span>
                            {% endif %}
                        </li>
                    </ul>
                </div>
            </div>

            <div class="card mb-4">
                <div class="card-header">
                    <h3>Import Operations</h3>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title">Import Mairies</h5>
                                    <p class="card-text">Import city halls data from mairies.json</p>
                                    <a href="{% url 'company:import_mairies' %}" class="btn btn-primary" {% if not files.mairies_exists %}disabled{% endif %}>
                                        Start Import
                                    </a>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6 mb-3">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title">Import Pharmacies (Set 1)</h5>
                                    <p class="card-text">Import pharmacies data from liste-des-pharmacies-1.json</p>
                                    <a href="{% url 'company:import_pharmacies_1' %}" class="btn btn-primary" {% if not files.pharmacies1_exists %}disabled{% endif %}>
                                        Start Import
                                    </a>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6 mb-3">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title">Import Pharmacies (Set 2)</h5>
                                    <p class="card-text">Import pharmacies data from liste-des-pharmacies-2.json</p>
                                    <a href="{% url 'company:import_pharmacies_2' %}" class="btn btn-primary" {% if not files.pharmacies2_exists %}disabled{% endif %}>
                                        Start Import
                                    </a>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6 mb-3">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title">Import Pharmacies (Set 3)</h5>
                                    <p class="card-text">Import pharmacies data from liste-des-pharmacies-3.json</p>
                                    <a href="{% url 'company:import_pharmacies_3' %}" class="btn btn-primary" {% if not files.pharmacies3_exists %}disabled{% endif %}>
                                        Start Import
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
